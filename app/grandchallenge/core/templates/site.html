{% extends "base.html" %}
{% load grandchallenge_tags %}
{% load guardian_tags %}
{% load admin_urls %}



{% block additionalCSS %}
    {% if site.skin %}
        /* custom css for this project */
        {% insert_file site.skin %}
    {% endif %}
{% endblock %}

{% block pageName %} {{ site.short_name }} {% endblock %}

{% block topheader %}
    {% if site.hide_footer %}
        <!--hidden -->
    {% else %}
        {{ block.super }}
    {% endif %}
{% endblock topheader %}

{% block headerLink %}"{% url 'challenge-homepage' site.short_name %}"
{% endblock %}

{% block headerTitle %}
    {% if site.header_image == "" %}
        <div class="noimage">
            {{ site.short_name }}
        </div>
    {% else %}
        <style>
            #headerTitle {
                padding: 0;
            }
        </style>
        <div class="image">
            <img src="{% url 'project_serve_file' site.short_name site.header_image %}"
                 class="headerImage">
        </div>
    {% endif %}
{% endblock %}



{% block topmenu %}

    {% for page in pages %}
        {% if not page.hidden %}
            {% if not forloop.first %}
                <li role="separator" class="divider"></li>
            {% endif %}
            <li class="nav-item {% if page == currentpage %}active{% endif %}">
                <a class="nav-link"
                   href="{{ page.get_absolute_url }}">
                    {% if page.display_title %}
                        {{ page.display_title }}
                    {% else %}
                        {{ page.title }}
                    {% endif %}
                </a>
            </li>

        {% endif %}
    {% endfor %}

    {% if site.use_registration_page %}

        <li role="separator" class="divider"></li>
        <li class="nav-item">
            <a class="nav-link"
               href="{% url 'participants:registration-create' site.short_name %}"><b>Join</b></a>
        </li>

    {% endif %}

    {% if site.use_evaluation %}

        {% get_obj_perms user for site as "site_perms" %}
        {% if "change_challenge" in site_perms or user_is_participant %}
            <li role="separator" class="divider"></li>

            {% if site.evaluation_config.use_teams %}
                <li class="nav-item">
                    <a class="nav-link"
                       href="{% url 'teams:list' site.short_name %}"><b>Teams</b></a>
                </li>
            {% endif %}
            <li class="nav-item">
                <a class="nav-link"
                   href="{% url 'evaluation:submission-create' site.short_name %}"><b>Submit</b></a>
            </li>

        {% endif %}

        <li role="separator" class="divider"></li>
        <li class="nav-item">
            <a class="nav-link"
               href="{% url 'evaluation:result-list' site.short_name %}">Results</a>
        </li>
    {% endif %}

{% endblock %}


{% block loginbutton %}
    {% if site.hide_signin %}
    {% else %}
        {{ block.super }}
    {% endif %}
{% endblock %}



{% block adminbutton %}

    {% get_obj_perms user for site as "site_perms" %}
    {% if "change_challenge" in site_perms %}
        {% if site.hide_footer %}
            <li role="separator" class="divider"></li>
        {% endif %}

        <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown"
               role="button" aria-haspopup="true"
               aria-expanded="false">Admin<span
                    class="caret"></span></a>
            <div class="dropdown-menu">
                <a class="dropdown-item"
                   href="{% url 'challenges:update' site.short_name %}">Challenge
                    Settings</a>
                <a class="dropdown-item"
                   href="{% url 'pages:list' site.short_name %}">Pages</a>
                <a class="dropdown-item"
                   href="{% url 'admins:list' site.short_name %}">Admins</a>
                <a class="dropdown-item"
                   href="{% url 'participants:list' site.short_name %}">Participants</a>
                <a class="dropdown-item"
                   href="{% url 'participants:registration-list' site.short_name %}">Participation
                    Requests</a>
                <a class="dropdown-item"
                   href="{% url 'uploads:list' site.short_name %}">Uploaded
                    Files</a>
                {% if site.use_evaluation %}
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item"
                       href="{% url 'evaluation:config-update' site.short_name %}">
                        Evaluation Settings
                    </a>
                    <a class="dropdown-item"
                       href="{% url 'evaluation:method-list' site.short_name %}">
                        Evaluation Methods
                    </a>
                    <a class="dropdown-item"
                       href="{% url 'evaluation:submission-list' site.short_name %}">
                        Evaluation Submissions
                    </a>
                    <a class="dropdown-item"
                       href="{% url 'evaluation:job-list' site.short_name %}">
                        Evaluation Jobs
                    </a>
                {% endif %}
            </div>
        </li>
    {% endif %}

{% endblock %}


{% block content %}

    {% block contentTitle %}
    {% endblock %}

    {% block pagecontent %}
        <p>redirect to first page here.</p>
    {% endblock %}

{% endblock %}

{% block footer %}
    {% if site.hide_footer %}
    {% else %}
        {{ block.super }}
    {% endif %}
{% endblock %}

